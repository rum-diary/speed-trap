{"version":3,"file":"navigation-timing.js","sourceRoot":"/","sources":["navigation-timing.ts"],"names":[],"mappings":"AAAA;;8DAE8D;AAE9D,YAAY,CAAC;;AAEb,MAAM,wBAAwB,GAAG;IAC/B,eAAe,EAAE,SAAS;IAC1B,gBAAgB,EAAE,SAAS;IAC3B,cAAc,EAAE,SAAS;IACzB,aAAa,EAAE,SAAS;IACxB,WAAW,EAAE,SAAS;IACtB,UAAU,EAAE,SAAS;IACrB,iBAAiB,EAAE,SAAS;IAC5B,eAAe,EAAE,SAAS;IAC1B,YAAY,EAAE,SAAS;IACvB,UAAU,EAAE,SAAS;IACrB,qBAAqB,EAAE,SAAS;IAChC,YAAY,EAAE,SAAS;IACvB,aAAa,EAAE,SAAS;IACxB,WAAW,EAAE,SAAS;IACtB,UAAU,EAAE,SAAS;IACrB,cAAc,EAAE,SAAS;IACzB,0BAA0B,EAAE,SAAS;IACrC,wBAAwB,EAAE,SAAS;IACnC,WAAW,EAAE,SAAS;IACtB,cAAc,EAAE,SAAS;IACzB,YAAY,EAAE,SAAS;CACxB,CAAC;AAEF,IAAI,gBAAgB,GAAsB,MAAM,CAAC,MAAM,CAAC,wBAAwB,CAAC,CAAC;AAClF,IAAI;IACF,gBAAgB,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC;CAC9C;AAAC,OAAO,CAAC,EAAE;IACV,OAAO;CACR;AAED,MAAM,eAAe,GAAG,gBAAgB,CAAC,eAAe,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;AAEvE,MAAqB,gBAAgB;IAInC,YAAY,OAAiD;QAC3D,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,gBAAgB,IAAI,gBAAgB,CAAC;QACrE,IAAI,CAAC,QAAQ,GAAG,eAAe,CAAC;IAClC,CAAC;IAED,GAAG;QACD,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAED,IAAI;QACF,IAAI,IAAI,GAAQ,EAAE,CAAC;QACnB,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC7B,KAAK,IAAI,GAAG,IAAI,wBAAwB,EAAE;YACxC,IAAI,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;YACxC,IAAI,MAAM,IAAI,QAAQ,EAAE;gBACtB,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,QAAQ,CAAC;aAC/B;iBAAM;gBACL,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;aAClB;SACF;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CACF;AA1BD,mCA0BC","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n\"use strict\";\n\nconst NAVIGATION_TIMING_FIELDS = {\n  navigationStart: undefined,\n  unloadEventStart: undefined,\n  unloadEventEnd: undefined,\n  redirectStart: undefined,\n  redirectEnd: undefined,\n  fetchStart: undefined,\n  domainLookupStart: undefined,\n  domainLookupEnd: undefined,\n  connectStart: undefined,\n  connectEnd: undefined,\n  secureConnectionStart: undefined,\n  requestStart: undefined,\n  responseStart: undefined,\n  responseEnd: undefined,\n  domLoading: undefined,\n  domInteractive: undefined,\n  domContentLoadedEventStart: undefined,\n  domContentLoadedEventEnd: undefined,\n  domComplete: undefined,\n  loadEventStart: undefined,\n  loadEventEnd: undefined\n};\n\nlet navigationTiming: PerformanceTiming = Object.create(NAVIGATION_TIMING_FIELDS);\ntry {\n  navigationTiming = window.performance.timing;\n} catch (e) {\n  // NOOP\n}\n\nconst navigationStart = navigationTiming.navigationStart || Date.now();\n\nexport default class NavigationTiming {\n  navigationTiming: any; // TODO - figure out how to do this properly!\n  baseTime: number;\n\n  constructor(options: { navigationTiming?: PerformanceTiming }) {\n    this.navigationTiming = options.navigationTiming || navigationTiming;\n    this.baseTime = navigationStart;\n  }\n\n  get(): PerformanceTiming {\n    return this.navigationTiming;\n  }\n\n  diff(): any {\n    let diff: any = {};\n    let baseTime = this.baseTime;\n    for (let key in NAVIGATION_TIMING_FIELDS) {\n      let timing = this.navigationTiming[key];\n      if (timing >= baseTime) {\n        diff[key] = timing - baseTime;\n      } else {\n        diff[key] = null;\n      }\n    }\n    return diff;\n  }\n}\n"]}